(this["webpackJsonpreply-for-nyein"]=this["webpackJsonpreply-for-nyein"]||[]).push([[0],{15:function(e,t,a){e.exports={NavigatorContainer:"Navigator_NavigatorContainer__2JX9B",Navigator:"Navigator_Navigator__tujGo",NavigationButton:"Navigator_NavigationButton__1CxBq",NavigationButtonDisabled:"Navigator_NavigationButtonDisabled__2ERCA"}},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),c=a.n(o),s=(a(69),a(6)),i=a(9),l=a(62),u=a(21),g=a.n(u),d=a(18),f=a(15),m=a.n(f),v=a(52),p=a(30),b=a.n(p),x={letter:{_id:"",styles:{fontSize:24,backgroundColor:"#fff",color:"#fff",marginLeft:52,marginRight:52,textAlign:"center"},text:"",createdAt:0},hasNext:!1,currentPage:0},N=Object(n.createContext)(null),j=function(){return Object(n.useContext)(N)};function w(){var e=j(),t=e.loading,a=e.hasNext,o=e.currentPage,c=e.goNextPage,s=e.goPrevPage,i=!t&&0!==o,l=i?"\u1014\u1031\u102c\u1000\u103a\u101e\u102d\u102f\u1037":"",u=(a=!t&&a)?"\u101b\u103e\u1031\u1037\u101e\u102d\u102f\u1037":"",g=Object(n.useCallback)((function(e){return Object(v.a)(m.a.NavigationButton,Object(d.a)({},m.a.NavigationButtonDisabled,!e))}),[]),f=Object(n.useCallback)((function(){}),[]);return r.a.createElement("div",{className:m.a.NavigatorContainer},r.a.createElement("div",{className:m.a.Navigator},r.a.createElement("img",{src:b.a,alt:"",onClick:i?s:f,className:g(i),title:l}),r.a.createElement("img",{src:b.a,onClick:a?c:f,alt:"",className:g(a),title:u})))}var h=a(53),O=a.n(h),_={password:"",loading:!1},E=Object(n.createContext)(),P=function(){return Object(n.useContext)(E)};function k(e){var t=["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049","\u1041\u1040"];return Object(l.a)(e+"").map((function(e){return t[e]})).join("")}function C(){var e=j().letter,t=P().loading,a=Object(n.useCallback)((function(){var a=e.styles,n=Object(s.a)({},a),r={backgroundColor:a.backgroundColor,color:a.color},o={opacity:t?0:"100%"};return delete n.backgroundColor,delete n.color,{styles:Object(s.a)({},n,{},o),colorStyles:r,opacity:o}}),[e,t]),o=Object(n.useCallback)((function(e){var t=k((e=new Date(e)).getDate()),a=k(e.getMonth()+1),n=k(e.getFullYear());return"".concat(t,"\u101b\u1000\u103a ").concat(a,"\u101c ").concat(n)}),[]),c=e.text,i=e.createdAt,l=a(),u=l.styles,d=l.colorStyles,f=l.opacity;return r.a.createElement("div",{className:g.a.TextView,style:d},r.a.createElement("div",{className:g.a.DateText,style:f},r.a.createElement("span",null,o(i))),r.a.createElement("div",{className:g.a.Text,style:u},r.a.createElement(O.a,{source:c,escapeHtml:!1})),r.a.createElement(w,null))}var y=a(31),B=a.n(y),T=a(54),D=a(20);function S(){var e=Object(n.useState)(x),t=Object(i.a)(e,2),a=t[0],o=t[1],c=P().loading,l=function(e){return o(Object(s.a)({},a,{currentPage:a.currentPage+e}))};!function(e,t){var a=P().password,r=function(){var e=D.CancelToken.source(),t=P(),a=t.password,n=t.setPassword,r=t.setLoading;return[function(){var t=Object(T.a)(B.a.mark((function t(o){var c,s,i;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),r(!0),t.next=4,D.get(c,{cancelToken:e.token,validateStatus:function(e){return e>=200&&e<=401},params:{limit:1,skip:o},headers:{Authorization:a}});case 4:if(401!==(s=t.sent).status){t.next=9;break}return n(""),r(!1),t.abrupt("return",{letter:null,hasNext:!1});case 9:return i=s.data.letters||[null],r(!1),t.abrupt("return",{letter:i[0],hasNext:s.data.hasNext});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e]}(),o=Object(i.a)(r,2),c=o[0],s=o[1];Object(n.useEffect)((function(){return""!==a&&c(t).then(e),function(){return s.cancel("Component unmount")}}),[a,t])}((function(e){var t=e.letter,n=e.hasNext;t&&(t.styles=JSON.parse(t.styles),o(Object(s.a)({},a,{letter:t,hasNext:n})))}),a.currentPage);var u={letter:a.letter,hasNext:a.hasNext,currentPage:a.currentPage,loading:c,goNextPage:function(){return l(1)},goPrevPage:function(){return l(-1)}};return(r.a.createElement(N.Provider,{value:u},r.a.createElement(C,null)))}var V=a(55),A=a.n(V);function L(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=P().setPassword;return r.a.createElement("div",{className:A.a.PromptPassword},r.a.createElement("input",{placeholder:"Password",type:"password",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{onClick:function(){return c(a)}},"Enter"))}var M=a(56),J=a(57),z=a(61),H=a(63),R=a(32),W=a.n(R),q=function(e){Object(H.a)(a,e);var t=Object(z.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(J.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:W.a.Meter},r.a.createElement("span",{className:W.a.Progress}))}}]),a}(n.Component),F=a(58),G=a(10);function I(){var e=Object(n.useState)(_),t=Object(i.a)(e,2),a=t[0],o=t[1],c=function(e){o(Object(s.a)({},a,{password:e})),document.cookie="password="+e};Object(n.useEffect)((function(){document.cookie.split("; ").map((function(e){var t=e.split("="),a=Object(i.a)(t,2),n=a[0],r=a[1];return"password"===n&&c(r),[]}))}),[]),Object(n.useEffect)((function(){""!==a.password?document.location.href="#/letter-view":document.location.href="#/login"}),[a.password]);var l=Object(s.a)({},a,{setLoading:function(e){return o(Object(s.a)({},a,{loading:e}))},setPassword:c});return(r.a.createElement(E.Provider,{value:l},a.loading?r.a.createElement(q,null):null,r.a.createElement(X,null)))}function X(){return r.a.createElement(F.a,null,r.a.createElement(G.a,{path:"/login"},r.a.createElement(L,null)),r.a.createElement(G.a,{path:"/letter-view"},r.a.createElement(S,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},21:function(e,t,a){e.exports={TextView:"TextView_TextView__sk-tp",DateText:"TextView_DateText__3fBAh",Text:"TextView_Text__2jw1O"}},30:function(e,t,a){e.exports=a.p+"static/media/arrow.d12b386f.svg"},32:function(e,t,a){e.exports={Meter:"LoadingBar_Meter__3jHm6",Progress:"LoadingBar_Progress__28D0g",progressBar:"LoadingBar_progressBar__27V53"}},55:function(e,t,a){e.exports={PromptPassword:"PromptPassword_PromptPassword__39PNC"}},64:function(e,t,a){e.exports=a(171)},69:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.fd240883.chunk.js.map