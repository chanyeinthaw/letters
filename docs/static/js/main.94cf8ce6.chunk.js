(this["webpackJsonpreply-for-nyein"]=this["webpackJsonpreply-for-nyein"]||[]).push([[0],{11:function(t,e,a){t.exports={NavigatorContainer:"Navigator_NavigatorContainer__wXphv",Navigator:"Navigator_Navigator__GDUY-",NavigationButton:"Navigator_NavigationButton__vUDaJ",NavigationButtonDisabled:"Navigator_NavigationButtonDisabled__CJN-h"}},157:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(42),o=a.n(s),i=(a(55),a(23)),c=a.n(i),l=a(43),u=a(8),g=a(48),h=a(3),d=a(4),p=a(5),v=a(6),f=a(49),m=a(16),b=a.n(m),x=a(14),y=a(11),N=a.n(y),w=a(44),j=a(24),P=a.n(j),_={password:"",letter:{_id:"",styles:{fontSize:24,backgroundColor:"#fff",color:"#fff",marginLeft:52,marginRight:52,textAlign:"center"},text:"",createdAt:0,loading:!0},hasNext:!1,currentPage:0},O=Object(n.createContext)(null),k=function(t){Object(v.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).getNavigationButtonClass=function(t){return Object(w.a)(N.a.NavigationButton,Object(x.a)({},N.a.NavigationButtonDisabled,!t))},t}return Object(d.a)(a,[{key:"getPrevText",value:function(){return this.props.hasPrev?"\u1014\u1031\u102c\u1000\u103a\u101e\u102d\u102f\u1037":""}},{key:"getNextText",value:function(){return this.props.hasNext?"\u101b\u103e\u1031\u1037\u101e\u102d\u102f\u1037":""}},{key:"nothing",value:function(){}},{key:"render",value:function(){var t=this.context,e=t.loading,a=t.hasNext,n=t.currentPage,s=t.goNextPage,o=t.goPrevPage,i=!e&&0!==n;return a=!e&&a,console.log("loading",e),r.a.createElement("div",{className:N.a.NavigatorContainer},r.a.createElement("div",{className:N.a.Navigator},r.a.createElement("img",{src:P.a,alt:"",onClick:i?o:this.nothing,className:this.getNavigationButtonClass(i),title:this.getPrevText()}),r.a.createElement("img",{src:P.a,onClick:a?s:this.nothing,alt:"",className:this.getNavigationButtonClass(a),title:this.getNextText()})))}}]),a}(n.Component);k.contextType=O;var C=a(45),E=a.n(C);function S(t){var e=["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049","\u1041\u1040"];return Object(f.a)(t+"").map((function(t){return e[t]})).join("")}var T=function(t){Object(v.a)(a,t);var e=Object(p.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"getStyles",value:function(){var t=this.context.letter.styles,e=Object(u.a)({},t),a={backgroundColor:t.backgroundColor,color:t.color};return delete e.backgroundColor,delete e.color,{styles:e,colorStyles:a}}},{key:"getMMDate",value:function(t){var e=S((t=new Date(t)).getDate()),a=S(t.getMonth()+1),n=S(t.getFullYear());return"".concat(e,"\u101b\u1000\u103a ").concat(a,"\u101c ").concat(n)}},{key:"render",value:function(){var t=this.context.letter,e=t.text,a=t.createdAt,n=this.getStyles(),s=n.styles,o=n.colorStyles;return r.a.createElement("div",{className:b.a.TextView,style:o},r.a.createElement("div",{className:b.a.DateText},r.a.createElement("span",null,this.getMMDate(a))),r.a.createElement("div",{className:b.a.Text,style:s},r.a.createElement(E.a,{source:e,escapeHtml:!1})),r.a.createElement(k,null))}}]),a}(n.Component);T.contextType=O;var B=a(46),D=a(47),M=a.n(D),L=function(t){Object(v.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={password:""},t}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return(r.a.createElement("div",{className:M.a.PromptPassword},r.a.createElement("input",{placeholder:"Password",type:"password",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}}),r.a.createElement("button",{onClick:function(){return t.props.onEnter(t.state.password)}},"Enter")))}}]),a}(n.Component),A=a(25),V=a.n(A),J=function(t){Object(v.a)(a,t);var e=Object(p.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:V.a.Meter},r.a.createElement("span",{className:V.a.Progress}))}}]),a}(n.Component),U=function(t){Object(v.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state=_,t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;document.cookie.split("; ").map((function(e){var a=e.split("="),n=Object(g.a)(a,2),r=n[0],s=n[1];return"password"===r&&t.setState(Object(u.a)({},t.state,{password:s})),[]}))}},{key:"componentDidUpdate",value:function(t,e,a){!0!==this.state.loading&&(""===e.password?this.getLetter().then(this.updateLetterState.bind(this)):e.currentPage!==this.state.currentPage&&this.getLetter().then(this.updateLetterState.bind(this)))}},{key:"getLetter",value:function(){var t=Object(l.a)(c.a.mark((function t(){var e,a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),this.setState(Object(u.a)({},this.state,{loading:!0})),t.next=4,B.get(e,{validateStatus:function(t){return t>=200&&t<=401},params:{limit:1,skip:this.state.currentPage},headers:{Authorization:this.state.password}});case 4:if(401!==(a=t.sent).status){t.next=8;break}return this.setState(Object(u.a)({},this.state,{password:"",loading:!1})),t.abrupt("return",{letter:null,hasNext:!1});case 8:return document.cookie="password="+this.state.password,n=a.data.letters||[null],t.abrupt("return",{letter:n[0],hasNext:a.data.hasNext});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateLetterState",value:function(t){var e=t.letter,a=t.hasNext;e&&(e.styles=JSON.parse(e.styles),this.setState(Object(u.a)({},this.state,{letter:e,hasNext:a,loading:!1})))}},{key:"changeCurrentPage",value:function(t){this.setState(Object(u.a)({},this.state,{currentPage:this.state.currentPage+t}))}},{key:"updatePassword",value:function(t){this.setState(Object(u.a)({},this.state,{password:t}))}},{key:"render",value:function(){var t=this,e={letter:this.state.letter,hasNext:this.state.hasNext,currentPage:this.state.currentPage,loading:this.state.loading,goNextPage:function(){return t.changeCurrentPage(1)},goPrevPage:function(){return t.changeCurrentPage(-1)}};return r.a.createElement(O.Provider,{value:e},this.state.loading?r.a.createElement(J,null):null,""===this.state.password?r.a.createElement(L,{onEnter:this.updatePassword.bind(this)}):r.a.createElement(T,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},16:function(t,e,a){t.exports={TextView:"TextView_TextView__1pNHD",DateText:"TextView_DateText__jrCCg",Text:"TextView_Text__3ij-0"}},24:function(t,e,a){t.exports=a.p+"static/media/arrow.d12b386f.svg"},25:function(t,e,a){t.exports={Meter:"LoadingBar_Meter__3yQmM",Progress:"LoadingBar_Progress__26jWa",progressBar:"LoadingBar_progressBar__3Z_lD"}},47:function(t,e,a){t.exports={PromptPassword:"PromptPassword_PromptPassword__2QYUZ"}},50:function(t,e,a){t.exports=a(157)},55:function(t,e,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.94cf8ce6.chunk.js.map