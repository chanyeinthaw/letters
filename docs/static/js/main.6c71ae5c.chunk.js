(this["webpackJsonpreply-for-nyein"]=this["webpackJsonpreply-for-nyein"]||[]).push([[0],{102:function(e,t,a){e.exports={PromptPassword:"PromptPassword_PromptPassword__39PNC"}},162:function(e,t,a){e.exports=a(297)},167:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),s=(a(167),a(14)),l=a(15),i=a(112),u=a(53),d=a.n(u),f=a(27),m=a(41),p=a.n(m),g=a(51),v=a(68),b=a.n(v),x={letter:{_id:"",styles:{fontSize:24,backgroundColor:"#fff",color:"#fff",marginLeft:52,marginRight:52,textAlign:"center"},text:"",createdAt:0},hasNext:!1,currentPage:0},_=Object(n.createContext)(null),O=function(){return Object(n.useContext)(_)};function w(){var e=O(),t=e.loading,a=e.hasNext,o=e.currentPage,c=e.goNextPage,s=e.goPrevPage,l=!t&&0!==o,i=l?"\u1014\u1031\u102c\u1000\u103a\u101e\u102d\u102f\u1037":"",u=(a=!t&&a)?"\u101b\u103e\u1031\u1037\u101e\u102d\u102f\u1037":"",d=Object(n.useCallback)((function(e){return Object(g.a)(p.a.NavigationButton,Object(f.a)({},p.a.NavigationButtonDisabled,!e))}),[]),m=Object(n.useCallback)((function(){}),[]);return r.a.createElement("div",{className:p.a.NavigatorContainer},r.a.createElement("div",{className:p.a.Navigator},r.a.createElement("img",{src:b.a,alt:"",onClick:l?s:m,className:d(l),title:i}),r.a.createElement("img",{src:b.a,onClick:a?c:m,alt:"",className:d(a),title:u})))}var C=a(52),h=a.n(C),E={loading:!1,requests:[]},y=Object(n.createContext)(),j=function(){return Object(n.useContext)(y)};function N(e){var t=["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049","\u1041\u1040"];return Object(i.a)(e+"").map((function(e){return t[e]})).join("")}function k(){var e=O().letter,t=j().loading,a=Object(n.useCallback)((function(){var a=e.styles,n=Object(s.a)({},a),r={backgroundColor:a.backgroundColor,color:a.color},o={opacity:t?0:"100%"};return delete n.backgroundColor,delete n.color,{styles:Object(s.a)({},n,{},o),colorStyles:r,opacity:o}}),[e,t]),o=Object(n.useCallback)((function(e){var t=N((e=new Date(e)).getDate()),a=N(e.getMonth()+1),n=N(e.getFullYear());return"".concat(t,"\u101b\u1000\u103a ").concat(a,"\u101c ").concat(n)}),[]),c=e.text,l=e.createdAt,i=a(),u=i.styles,f=i.colorStyles,m=i.opacity;return r.a.createElement("div",{className:d.a.TextView,style:f},r.a.createElement("div",{className:d.a.DateText,style:m},r.a.createElement("span",null,o(l))),r.a.createElement("div",{className:d.a.Text,style:u},r.a.createElement(h.a,{source:c,escapeHtml:!1})),r.a.createElement(w,null))}var P=a(17),T=a.n(P),A=a(25),S=a(28),D=a(101);function V(){return{getPassword:function(){var e,t=document.cookie.split("; "),a=Object(D.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value.split("="),r=Object(l.a)(n,2),o=r[0],c=r[1];if("password"===o)return c}}catch(s){a.e(s)}finally{a.f()}return""},setPassword:function(e){return document.cookie="password="+e}}}function B(){return function(e){return document.location.href=e}}function L(){var e=B();return function(){return e("#/login")}}function M(){var e=Object(n.useState)(x),t=Object(l.a)(e,2),a=t[0],o=t[1],c=j().loading,i=function(e){return o(Object(s.a)({},a,{currentPage:a.currentPage+e}))};!function(e,t){var a=V().getPassword,r=function(){var e=S.CancelToken.source(),t=j().setLoading,a=V(),n=a.getPassword,r=a.setPassword,o=L();return[function(){var a=Object(A.a)(T.a.mark((function a(c){var s,l,i,u;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),l=Date.now()+"letters",t(l),a.next=5,S.get(s,{cancelToken:e.token,validateStatus:function(e){return e>=200&&e<=401},params:{limit:1,skip:c},headers:{Authorization:n()}});case 5:if(401!==(i=a.sent).status){a.next=11;break}return r(""),o(),t(l,!0),a.abrupt("return",{letter:null,hasNext:!1});case 11:return u=i.data.letters||[null],t(l,!0),a.abrupt("return",{letter:u[0],hasNext:i.data.hasNext});case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e]}(),o=Object(l.a)(r,2),c=o[0],s=o[1];Object(n.useEffect)((function(){return""!==a()&&c(t).then(e),function(){return s.cancel("Component unmount")}}),[t])}((function(e){var t=e.letter,n=e.hasNext;t&&(t.styles="string"===typeof t.styles?JSON.parse(t.styles):t.styles,o(Object(s.a)({},a,{letter:t,hasNext:n})))}),a.currentPage);var u={letter:a.letter,hasNext:a.hasNext,currentPage:a.currentPage,loading:c,goNextPage:function(){return i(1)},goPrevPage:function(){return i(-1)}};return(r.a.createElement(_.Provider,{value:u},r.a.createElement(k,null)))}var z=a(102),I=a.n(z);function H(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],o=t[1],c=V(),s=c.getPassword,i=c.setPassword,u=B();Object(n.useEffect)((function(){""!==s()&&u("#/")}),[]);return r.a.createElement("div",{className:I.a.PromptPassword},r.a.createElement("input",{placeholder:"Password",type:"password",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{onClick:function(){i(a),u("#/")}},"Enter"))}var J=a(103),W=a(104),Y=a(111),q=a(113),F=a(69),G=a.n(F),R=function(e){Object(q.a)(a,e);var t=Object(Y.a)(a);function a(){return Object(J.a)(this,a),t.apply(this,arguments)}return Object(W.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:G.a.Meter},r.a.createElement("span",{className:G.a.Progress}))}}]),a}(n.Component),U=a(110),X=a(22),$=a(42),K=a.n($),Q={_id:void 0,styles:{backgroundColor:"#ffffff",color:"#212121"},text:"",createdAt:new Date},Z=Object(n.createContext)(),ee=function(){return Object(n.useContext)(Z)},te=a(37),ae=a.n(te);var ne=a(38),re=a.n(ne);function oe(e){var t=e.onSelect,a=Object(n.useState)([]),o=Object(l.a)(a,2),c=o[0],s=o[1],i=function(){var e=j().setLoading,t=V(),a=t.getPassword,n=t.setPassword,r=L();return Object(A.a)(T.a.mark((function t(){var o,c,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/colors"),c=Date.now()+"colors",e(c),t.next=5,S.get(o,{validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:a()}});case 5:if(401!==(s=t.sent).status){t.next=11;break}return e(c,!0),n(""),r(),t.abrupt("return",[]);case 11:return e(c,!0),t.abrupt("return",s.data.colors);case 13:case"end":return t.stop()}}),t)})))}();return Object(n.useEffect)((function(){i().then((function(e){return s(e)}))}),[]),r.a.createElement("div",{className:re.a.Colors},(0===c.length?Array(7).fill("#e1e1e1"):[]).map((function(e,t){return r.a.createElement("div",{className:re.a.ColorCell,key:t},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){}}))})),c.map((function(e){return r.a.createElement("div",{className:re.a.ColorCell,key:e},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){return t(e)}}))})))}a(54);var ce=a(302),se=a(301);function le(e){var t=e.onSave,a=ee(),n=a.styles,o=a.date,c=a.setDate,s=a.text,l=j().loading,i=function(){var e=ee().setStyle;return{updateBackgroundColor:function(t){return e("backgroundColor",t)},updateTextColor:function(t){return e("color",t)}}}(),u=i.updateBackgroundColor,d=i.updateTextColor,f={borderLeftColor:n.color},m=!0===l||""===s;return r.a.createElement("div",{className:ae.a.Options,style:f},r.a.createElement("div",{className:ae.a.Title},"Options"),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Date"),r.a.createElement(ce.a,{highlightCurrentDay:!0,reverseMonthAndYearMenus:!0,onChange:c,defaultValue:o})),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Background Color"),r.a.createElement(oe,{onSelect:u})),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Text Color"),r.a.createElement(oe,{onSelect:d,download:!1})),r.a.createElement(se.a,{disabled:m,onClick:t},"Save"))}function ie(){var e=Object(n.useState)(Q),t=Object(l.a)(e,2),a=t[0],o=t[1],c=function(){var e=j().setLoading,t=V(),a=t.getPassword,n=t.setPassword,r=L(),o=B();return function(){var t=Object(A.a)(T.a.mark((function t(c,s,l,i){var u,d,f,m;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),d=Date.now()+"save-letter",e(d),f={_id:c,text:s,createdAt:i,styles:l},t.next=6,S.post(u,f,{validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:a()}});case 6:if(401!==(m=t.sent).status){t.next=12;break}return n(""),e(d,!0),r(),t.abrupt("return");case 12:o("#/editor/".concat(m.data._id)),e(d,!0);case 14:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}()}(),i=function(){var e=j().setLoading,t=V(),a=t.getPassword,n=t.setPassword,r=L();return function(){var t=Object(A.a)(T.a.mark((function t(o){var c,s,l;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),s=Date.now()+"letter",e(s),t.next=5,S.get(c+"/"+o,{validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:a()}});case 5:if(401!==(l=t.sent).status){t.next=11;break}return n(""),r(),e(s,!0),t.abrupt("return",null);case 11:return e(s,!0),t.abrupt("return",l.data);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),u=Object(X.e)().id;Object(n.useEffect)((function(){Object(A.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i(u);case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return");case 7:o(Object(s.a)({},a,{_id:u,text:t.text,createdAt:new Date(t.createdAt),styles:"string"===typeof t.styles?JSON.parse(t.styles):t.styles}));case 8:case"end":return e.stop()}}),e)})))().then()}),[]);var d={backgroundColor:a.styles.backgroundColor,color:a.styles.color},m=function(e){return o(Object(s.a)({},a,{text:e}))},p={styles:a.styles,text:a.text,date:a.createdAt,colors:a.colors,setStyle:function(e,t){o(Object(s.a)({},a,{styles:Object(s.a)({},a.styles,Object(f.a)({},e,t))}))},setText:m,setDate:function(e){return o(Object(s.a)({},a,{createdAt:e}))},setColors:function(e){return o(Object(s.a)({},a,{colors:e}))}};return r.a.createElement(Z.Provider,{value:p},r.a.createElement("div",{className:K.a.Editor,style:d},r.a.createElement("div",{className:K.a.TextViewWrapper},r.a.createElement("textarea",{autoFocus:!0,className:K.a.TextView,style:d,value:a.text,onChange:function(e){return m(e.target.value)}}),r.a.createElement(h.a,{source:a.text,escapeHtml:!1,className:K.a.TextViewPreview})),r.a.createElement(le,{onSave:function(){return c(a._id,a.text,a.styles,a.createdAt.getTime())}})))}function ue(){var e=Object(n.useState)(E),t=Object(l.a)(e,2),a=t[0],o=t[1],c=V().getPassword,i=B();Object(n.useEffect)((function(){""===c()&&i("#/login")}),[]);var u=Object(s.a)({},a,{setLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.requests;t?n.splice(n.indexOf(e),1):n.push(e),o(Object(s.a)({},a,{requests:n,loading:n.length>0}))}});return(r.a.createElement(y.Provider,{value:u},a.loading?r.a.createElement(R,null):null,r.a.createElement(de,null)))}function de(){return r.a.createElement(U.a,null,r.a.createElement(X.a,{exact:!0,path:"/",component:M}),r.a.createElement(X.a,{path:"/letter",component:M}),r.a.createElement(X.a,{path:"/login",component:H}),r.a.createElement(X.a,{path:"/editor/:id?",component:ie}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={Options:"Options_Options__AiE0X",Option:"Options_Option__1HHV2",Title:"Options_Title__69dAS"}},38:function(e,t,a){e.exports={Colors:"Colors_Colors__RegEJ",ColorCell:"Colors_ColorCell__CUPMs",Color:"Colors_Color__jhoaO"}},41:function(e,t,a){e.exports={NavigatorContainer:"Navigator_NavigatorContainer__1A4Fa",Navigator:"Navigator_Navigator__kapp6",NavigationButton:"Navigator_NavigationButton__1ADLL",NavigationButtonDisabled:"Navigator_NavigationButtonDisabled__2y3BO"}},42:function(e,t,a){e.exports={Editor:"Editor_Editor__1Anab",TextViewWrapper:"Editor_TextViewWrapper__2U_PY",TextViewPreview:"Editor_TextViewPreview__2bGv1",TextView:"Editor_TextView__2Caav"}},53:function(e,t,a){e.exports={TextView:"TextView_TextView__18I0G",DateText:"TextView_DateText__3Op1p",Text:"TextView_Text__3dibn"}},54:function(e,t,a){e.exports={TextAlignmentContainer:"TextAlignment_TextAlignmentContainer__32VVi",TextAlignmentItem:"TextAlignment_TextAlignmentItem__2ezi_",TextAlignmentItemSelected:"TextAlignment_TextAlignmentItemSelected__3hYiv"}},68:function(e,t,a){e.exports=a.p+"static/media/arrow.d12b386f.svg"},69:function(e,t,a){e.exports={Meter:"LoadingBar_Meter__3jHm6",Progress:"LoadingBar_Progress__28D0g",progressBar:"LoadingBar_progressBar__27V53"}}},[[162,1,2]]]);
//# sourceMappingURL=main.6c71ae5c.chunk.js.map