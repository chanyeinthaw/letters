(this["webpackJsonpreply-for-nyein"]=this["webpackJsonpreply-for-nyein"]||[]).push([[0],{102:function(e,t,a){e.exports={PromptPassword:"PromptPassword_PromptPassword__39PNC"}},162:function(e,t,a){e.exports=a(297)},167:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),l=(a(167),a(14)),s=a(17),i=a(112),u=a(53),d=a.n(u),m=a(25),f=a(41),g=a.n(f),p=a(51),v=a(68),x=a.n(v),b={letter:{_id:"",styles:{fontSize:24,backgroundColor:"#fff",color:"#fff",marginLeft:52,marginRight:52,textAlign:"center"},text:"",createdAt:0},hasNext:!1,currentPage:0},_=Object(n.createContext)(null),C=function(){return Object(n.useContext)(_)};function E(){var e=C(),t=e.loading,a=e.hasNext,o=e.currentPage,c=e.goNextPage,l=e.goPrevPage,s=!t&&0!==o,i=s?"\u1014\u1031\u102c\u1000\u103a\u101e\u102d\u102f\u1037":"",u=(a=!t&&a)?"\u101b\u103e\u1031\u1037\u101e\u102d\u102f\u1037":"",d=Object(n.useCallback)((function(e){return Object(p.a)(g.a.NavigationButton,Object(m.a)({},g.a.NavigationButtonDisabled,!e))}),[]),f=Object(n.useCallback)((function(){}),[]);return r.a.createElement("div",{className:g.a.NavigatorContainer},r.a.createElement("div",{className:g.a.Navigator},r.a.createElement("img",{src:x.a,alt:"",onClick:s?l:f,className:d(s),title:i}),r.a.createElement("img",{src:x.a,onClick:a?c:f,alt:"",className:d(a),title:u})))}var O=a(52),h=a.n(O),w={loading:!1},N=Object(n.createContext)(),y=function(){return Object(n.useContext)(N)};function j(e){var t=["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049","\u1041\u1040"];return Object(i.a)(e+"").map((function(e){return t[e]})).join("")}function P(){var e=C().letter,t=y().loading,a=Object(n.useCallback)((function(){var a=e.styles,n=Object(l.a)({},a),r={backgroundColor:a.backgroundColor,color:a.color},o={opacity:t?0:"100%"};return delete n.backgroundColor,delete n.color,{styles:Object(l.a)({},n,{},o),colorStyles:r,opacity:o}}),[e,t]),o=Object(n.useCallback)((function(e){var t=j((e=new Date(e)).getDate()),a=j(e.getMonth()+1),n=j(e.getFullYear());return"".concat(t,"\u101b\u1000\u103a ").concat(a,"\u101c ").concat(n)}),[]),c=e.text,s=e.createdAt,i=a(),u=i.styles,m=i.colorStyles,f=i.opacity;return r.a.createElement("div",{className:d.a.TextView,style:m},r.a.createElement("div",{className:d.a.DateText,style:f},r.a.createElement("span",null,o(s))),r.a.createElement("div",{className:d.a.Text,style:u},r.a.createElement(h.a,{source:c,escapeHtml:!1})),r.a.createElement(E,null))}var k=a(24),T=a.n(k),A=a(36),S=a(29),V=a(101);function B(){return{getPassword:function(){var e,t=document.cookie.split("; "),a=Object(V.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value.split("="),r=Object(s.a)(n,2),o=r[0],c=r[1];if("password"===o)return c}}catch(l){a.e(l)}finally{a.f()}return""},setPassword:function(e){return document.cookie="password="+e}}}function D(){return function(e){return document.location.href=e}}function L(){var e=D();return function(){return e("#/login")}}function M(){var e=Object(n.useState)(b),t=Object(s.a)(e,2),a=t[0],o=t[1],c=y().loading,i=function(e){return o(Object(l.a)({},a,{currentPage:a.currentPage+e}))};!function(e,t){var a=B().getPassword,r=function(){var e=S.CancelToken.source(),t=y().setLoading,a=B(),n=a.getPassword,r=a.setPassword,o=L();return[function(){var a=Object(A.a)(T.a.mark((function a(c){var l,s,i;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),t(!0),a.next=4,S.get(l,{cancelToken:e.token,validateStatus:function(e){return e>=200&&e<=401},params:{limit:1,skip:c},headers:{Authorization:n()}});case 4:if(401!==(s=a.sent).status){a.next=10;break}return r(""),o(),t(!1),a.abrupt("return",{letter:null,hasNext:!1});case 10:return i=s.data.letters||[null],t(!1),a.abrupt("return",{letter:i[0],hasNext:s.data.hasNext});case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e]}(),o=Object(s.a)(r,2),c=o[0],l=o[1];Object(n.useEffect)((function(){return""!==a()&&c(t).then(e),function(){return l.cancel("Component unmount")}}),[t])}((function(e){var t=e.letter,n=e.hasNext;t&&(t.styles=JSON.parse(t.styles),o(Object(l.a)({},a,{letter:t,hasNext:n})))}),a.currentPage);var u={letter:a.letter,hasNext:a.hasNext,currentPage:a.currentPage,loading:c,goNextPage:function(){return i(1)},goPrevPage:function(){return i(-1)}};return(r.a.createElement(_.Provider,{value:u},r.a.createElement(P,null)))}var I=a(102),z=a.n(I);function H(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],c=B().setPassword,l=D();return r.a.createElement("div",{className:z.a.PromptPassword},r.a.createElement("input",{placeholder:"Password",type:"password",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{onClick:function(){c(a),l("#/")}},"Enter"))}var J=a(103),W=a(104),Y=a(111),F=a(113),G=a(69),R=a.n(G),U=function(e){Object(F.a)(a,e);var t=Object(Y.a)(a);function a(){return Object(J.a)(this,a),t.apply(this,arguments)}return Object(W.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:R.a.Meter},r.a.createElement("span",{className:R.a.Progress}))}}]),a}(n.Component),q=a(109),X=a(28),$=a(42),K=a.n($),Q={styles:{backgroundColor:"#ffffff",color:"#212121"},text:"",createdAt:new Date,colors:[]},Z=Object(n.createContext)(),ee=function(){return Object(n.useContext)(Z)},te=a(37),ae=a.n(te);var ne=a(38),re=a.n(ne);function oe(e){var t=e.onSelect,a=ee().colors;return function(){var e=function(){var e=y().setLoading,t=B(),a=t.getPassword,n=t.setPassword,r=L();return Object(A.a)(T.a.mark((function t(){var o,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/colors"),e(!0),t.next=4,S.get(o,{validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:a()}});case 4:if(401!==(c=t.sent).status){t.next=10;break}return e(!1),n(""),r(),t.abrupt("return",[]);case 10:return e(!1),t.abrupt("return",c.data.colors);case 12:case"end":return t.stop()}}),t)})))}(),t=ee().setColors;Object(n.useEffect)((function(){e().then((function(e){return t(e)}))}),[])}(),r.a.createElement("div",{className:re.a.Colors},(0===a.length?Array(7).fill("#e1e1e1"):[]).map((function(e,t){return r.a.createElement("div",{className:re.a.ColorCell,key:t},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){}}))})),a.map((function(e){return r.a.createElement("div",{className:re.a.ColorCell,key:e},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){return t(e)}}))})))}a(54);var ce=a(302),le=a(301);function se(e){var t=e.onSave,a=ee(),n=a.styles,o=a.date,c=a.setDate,l=a.text,s=y().loading,i=function(){var e=ee().setStyle;return{updateBackgroundColor:function(t){return e("backgroundColor",t)},updateTextColor:function(t){return e("color",t)}}}(),u=i.updateBackgroundColor,d=i.updateTextColor,m={borderLeftColor:n.color},f=!0===s||""===l;return r.a.createElement("div",{className:ae.a.Options,style:m},r.a.createElement("div",{className:ae.a.Title},"Options"),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Date"),r.a.createElement(ce.a,{highlightCurrentDay:!0,reverseMonthAndYearMenus:!0,onChange:c,defaultValue:o})),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Background Color"),r.a.createElement(oe,{onSelect:u})),r.a.createElement("div",{className:ae.a.Option},r.a.createElement("p",null,"Text Color"),r.a.createElement(oe,{onSelect:d,download:!1})),r.a.createElement(le.a,{disabled:f,onClick:t},"Save"))}function ie(){var e=Object(n.useState)(Q),t=Object(s.a)(e,2),a=t[0],o=t[1],c=function(){var e=y().setLoading,t=B(),a=t.getPassword,n=t.setPassword,r=L();return function(){var t=Object(A.a)(T.a.mark((function t(o,c,l){var s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),e(!0),t.next=4,S.request({method:"POST",url:s,data:o,validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:a(),styles:JSON.stringify(c),createdAt:l,"Content-Type":"text/plain"}});case 4:401===t.sent.status&&(n(""),r(),e(!1)),alert("Letter Saved !"),document.location.reload();case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}(),i={backgroundColor:a.styles.backgroundColor,color:a.styles.color},u=function(e){return o(Object(l.a)({},a,{text:e}))},d={styles:a.styles,text:a.text,date:a.createdAt,colors:a.colors,setStyle:function(e,t){o(Object(l.a)({},a,{styles:Object(l.a)({},a.styles,Object(m.a)({},e,t))}))},setText:u,setDate:function(e){return o(Object(l.a)({},a,{createdAt:e}))},setColors:function(e){return o(Object(l.a)({},a,{colors:e}))}};return r.a.createElement(Z.Provider,{value:d},r.a.createElement("div",{className:K.a.Editor,style:i},r.a.createElement("div",{className:K.a.TextViewWrapper},r.a.createElement("textarea",{autoFocus:!0,className:K.a.TextView,style:i,value:a.text,onChange:function(e){return u(e.target.value)}}),r.a.createElement(h.a,{source:a.text,escapeHtml:!1,className:K.a.TextViewPreview})),r.a.createElement(se,{onSave:function(){return c(a.text,a.styles,a.createdAt.getTime())}})))}function ue(){var e=Object(n.useState)(w),t=Object(s.a)(e,2),a=t[0],o=t[1],c=B().getPassword,i=D();Object(n.useEffect)((function(){""===c()&&i("#/login")}),[]);var u=Object(l.a)({},a,{setLoading:function(e){return o(Object(l.a)({},a,{loading:e}))}});return(r.a.createElement(N.Provider,{value:u},a.loading?r.a.createElement(U,null):null,r.a.createElement(de,null)))}function de(){return r.a.createElement(q.a,null,r.a.createElement(X.a,{exact:!0,path:"/",component:M}),r.a.createElement(X.a,{path:"/letter",component:M}),r.a.createElement(X.a,{path:"/login",component:H}),r.a.createElement(X.a,{path:"/editor",component:ie}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={Options:"Options_Options__AiE0X",Option:"Options_Option__1HHV2",Title:"Options_Title__69dAS"}},38:function(e,t,a){e.exports={Colors:"Colors_Colors__RegEJ",ColorCell:"Colors_ColorCell__CUPMs",Color:"Colors_Color__jhoaO"}},41:function(e,t,a){e.exports={NavigatorContainer:"Navigator_NavigatorContainer__1A4Fa",Navigator:"Navigator_Navigator__kapp6",NavigationButton:"Navigator_NavigationButton__1ADLL",NavigationButtonDisabled:"Navigator_NavigationButtonDisabled__2y3BO"}},42:function(e,t,a){e.exports={Editor:"Editor_Editor__1Anab",TextViewWrapper:"Editor_TextViewWrapper__2U_PY",TextViewPreview:"Editor_TextViewPreview__2bGv1",TextView:"Editor_TextView__2Caav"}},53:function(e,t,a){e.exports={TextView:"TextView_TextView__18I0G",DateText:"TextView_DateText__3Op1p",Text:"TextView_Text__3dibn"}},54:function(e,t,a){e.exports={TextAlignmentContainer:"TextAlignment_TextAlignmentContainer__32VVi",TextAlignmentItem:"TextAlignment_TextAlignmentItem__2ezi_",TextAlignmentItemSelected:"TextAlignment_TextAlignmentItemSelected__3hYiv"}},68:function(e,t,a){e.exports=a.p+"static/media/arrow.d12b386f.svg"},69:function(e,t,a){e.exports={Meter:"LoadingBar_Meter__3jHm6",Progress:"LoadingBar_Progress__28D0g",progressBar:"LoadingBar_progressBar__27V53"}}},[[162,1,2]]]);
//# sourceMappingURL=main.97a59371.chunk.js.map