(this["webpackJsonpreply-for-nyein"]=this["webpackJsonpreply-for-nyein"]||[]).push([[0],{102:function(e,t,n){e.exports={PromptPassword:"PromptPassword_PromptPassword__39PNC"}},159:function(e,t,n){e.exports=n(294)},164:function(e,t,n){},25:function(e,t,n){e.exports={Options:"Options_Options__AiE0X",Option:"Options_Option__1HHV2",Title:"Options_Title__69dAS"}},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=(n(164),n(14)),i=n(17),s=n(112),u=n(51),m=n.n(u),d=n(26),g=n(41),f=n.n(g),p=n(50),v=n(66),x=n.n(v),b={letter:{_id:"",styles:{fontSize:24,backgroundColor:"#fff",color:"#fff",marginLeft:52,marginRight:52,textAlign:"center"},text:"",createdAt:0},hasNext:!1,currentPage:0},C=Object(a.createContext)(null),E=function(){return Object(a.useContext)(C)};function O(){var e=E(),t=e.loading,n=e.hasNext,o=e.currentPage,c=e.goNextPage,l=e.goPrevPage,i=!t&&0!==o,s=i?"\u1014\u1031\u102c\u1000\u103a\u101e\u102d\u102f\u1037":"",u=(n=!t&&n)?"\u101b\u103e\u1031\u1037\u101e\u102d\u102f\u1037":"",m=Object(a.useCallback)((function(e){return Object(p.a)(f.a.NavigationButton,Object(d.a)({},f.a.NavigationButtonDisabled,!e))}),[]),g=Object(a.useCallback)((function(){}),[]);return r.a.createElement("div",{className:f.a.NavigatorContainer},r.a.createElement("div",{className:f.a.Navigator},r.a.createElement("img",{src:x.a,alt:"",onClick:i?l:g,className:m(i),title:s}),r.a.createElement("img",{src:x.a,onClick:n?c:g,alt:"",className:m(n),title:u})))}var _=n(100),h=n.n(_),N={loading:!1},y=Object(a.createContext)(),j=function(){return Object(a.useContext)(y)};function k(e){var t=["\u1040","\u1041","\u1042","\u1043","\u1044","\u1045","\u1046","\u1047","\u1048","\u1049","\u1041\u1040"];return Object(s.a)(e+"").map((function(e){return t[e]})).join("")}function w(){var e=E().letter,t=j().loading,n=Object(a.useCallback)((function(){var n=e.styles,a=Object(l.a)({},n),r={backgroundColor:n.backgroundColor,color:n.color},o={opacity:t?0:"100%"};return delete a.backgroundColor,delete a.color,{styles:Object(l.a)({},a,{},o),colorStyles:r,opacity:o}}),[e,t]),o=Object(a.useCallback)((function(e){var t=k((e=new Date(e)).getDate()),n=k(e.getMonth()+1),a=k(e.getFullYear());return"".concat(t,"\u101b\u1000\u103a ").concat(n,"\u101c ").concat(a)}),[]),c=e.text,i=e.createdAt,s=n(),u=s.styles,d=s.colorStyles,g=s.opacity;return r.a.createElement("div",{className:m.a.TextView,style:d},r.a.createElement("div",{className:m.a.DateText,style:g},r.a.createElement("span",null,o(i))),r.a.createElement("div",{className:m.a.Text,style:u},r.a.createElement(h.a,{source:c,escapeHtml:!1})),r.a.createElement(O,null))}var S=n(24),T=n.n(S),P=n(37),A=n(30),z=n(101);function B(){return{getPassword:function(){var e,t=document.cookie.split("; "),n=Object(z.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value.split("="),r=Object(i.a)(a,2),o=r[0],c=r[1];if("password"===o)return c}}catch(l){n.e(l)}finally{n.f()}return""},setPassword:function(e){return document.cookie="password="+e}}}function L(){return function(e){return document.location.href=e}}function D(){var e=L();return function(){return e("#/login")}}function V(){var e=Object(a.useState)(b),t=Object(i.a)(e,2),n=t[0],o=t[1],c=j().loading,s=function(e){return o(Object(l.a)({},n,{currentPage:n.currentPage+e}))};!function(e,t){var n=B().getPassword,r=function(){var e=A.CancelToken.source(),t=j().setLoading,n=B(),a=n.getPassword,r=n.setPassword,o=D();return[function(){var n=Object(P.a)(T.a.mark((function n(c){var l,i,s;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),t(!0),n.next=4,A.get(l,{cancelToken:e.token,validateStatus:function(e){return e>=200&&e<=401},params:{limit:1,skip:c},headers:{Authorization:a()}});case 4:if(401!==(i=n.sent).status){n.next=10;break}return r(""),o(),t(!1),n.abrupt("return",{letter:null,hasNext:!1});case 10:return s=i.data.letters||[null],t(!1),n.abrupt("return",{letter:s[0],hasNext:i.data.hasNext});case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e]}(),o=Object(i.a)(r,2),c=o[0],l=o[1];Object(a.useEffect)((function(){return""!==n()&&c(t).then(e),function(){return l.cancel("Component unmount")}}),[t])}((function(e){var t=e.letter,a=e.hasNext;t&&(t.styles=JSON.parse(t.styles),o(Object(l.a)({},n,{letter:t,hasNext:a})))}),n.currentPage);var u={letter:n.letter,hasNext:n.hasNext,currentPage:n.currentPage,loading:c,goNextPage:function(){return s(1)},goPrevPage:function(){return s(-1)}};return(r.a.createElement(C.Provider,{value:u},r.a.createElement(w,null)))}var M=n(102),I=n.n(M);function R(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],c=B().setPassword,l=L();return r.a.createElement("div",{className:I.a.PromptPassword},r.a.createElement("input",{placeholder:"Password",type:"password",value:n,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{onClick:function(){c(n),l("#/")}},"Enter"))}var F=n(103),J=n(104),H=n(111),Y=n(113),W=n(67),q=n.n(W),G=function(e){Object(Y.a)(n,e);var t=Object(H.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(J.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:q.a.Meter},r.a.createElement("span",{className:q.a.Progress}))}}]),n}(a.Component),U=n(109),X=n(29),$=n(68),K=n.n($),Q={styles:{fontSize:24,backgroundColor:"#ffffff",color:"#212121",marginLeft:0,marginRight:0,textAlign:"unset"},text:"",createdAt:new Date,colors:[]},Z=Object(a.createContext)(),ee=function(){return Object(a.useContext)(Z)},te=n(25),ne=n.n(te);var ae=n(38),re=n.n(ae);function oe(e){var t=e.onSelect,n=ee().colors;return function(){var e=function(){var e=j().setLoading,t=B(),n=t.getPassword,a=t.setPassword,r=D();return Object(P.a)(T.a.mark((function t(){var o,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/colors"),e(!0),t.next=4,A.get(o,{validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:n()}});case 4:if(401!==(c=t.sent).status){t.next=10;break}return e(!1),a(""),r(),t.abrupt("return",[]);case 10:return e(!1),t.abrupt("return",c.data.colors);case 12:case"end":return t.stop()}}),t)})))}(),t=ee().setColors;Object(a.useEffect)((function(){e().then((function(e){return t(e)}))}),[])}(),r.a.createElement("div",{className:re.a.Colors},(0===n.length?Array(7).fill("#e1e1e1"):[]).map((function(e,t){return r.a.createElement("div",{className:re.a.ColorCell,key:t},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){}}))})),n.map((function(e){return r.a.createElement("div",{className:re.a.ColorCell,key:e},r.a.createElement("div",{className:re.a.Color,style:{backgroundColor:e},onClick:function(){return t(e)}}))})))}var ce=n(52),le=n.n(ce);function ie(e){var t=e.onSelect,n=Object(a.useState)("unset"),o=Object(i.a)(n,2),c=o[0],l=o[1],s=function(e){return Object(p.a)(le.a.TextAlignmentItem,Object(d.a)({},le.a.TextAlignmentItemSelected,c===e))},u=function(e){return function(n){l(e),t(e)}};return r.a.createElement("div",{className:le.a.TextAlignmentContainer},r.a.createElement("div",{className:s("unset"),onClick:u("unset")},"None"),r.a.createElement("div",{className:s("left"),onClick:u("left")},"Left"),r.a.createElement("div",{className:s("center"),onClick:u("center")},"Center"),r.a.createElement("div",{className:s("right"),onClick:u("right")},"Right"))}var se=n(299),ue=n(298);function me(e){var t=e.onSave,n=ee(),a=n.styles,o=n.date,c=n.setDate,l=n.text,i=j().loading,s=function(){var e=ee(),t=e.setStyle;e.setText,e.setDate;return{updateBackgroundColor:function(e){return t("backgroundColor",e)},updateTextColor:function(e){return t("color",e)},updateTextAlignment:function(e){return t("textAlign",e)},updateFontSize:function(e){return t("fontSize",e)},updateMargins:function(e){t("margin",e)}}}(),u=s.updateBackgroundColor,m=s.updateTextColor,d=s.updateTextAlignment,g=s.updateFontSize,f=s.updateMargins,p={borderLeftColor:a.color},v=!0===i||""===l;return r.a.createElement("div",{className:ne.a.Options,style:p},r.a.createElement("div",{className:ne.a.Title},"Options"),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Date"),r.a.createElement(se.a,{highlightCurrentDay:!0,reverseMonthAndYearMenus:!0,onChange:c,defaultValue:o})),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Font Size"),r.a.createElement(ue.g,{value:a.fontSize,onChange:g,stepSize:1,labelStepSize:12,min:12,max:60})),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Margins"),r.a.createElement(ue.g,{value:a.marginRight,onChange:f,stepSize:1,labelStepSize:50,min:0,max:200})),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Text Alignment"),r.a.createElement(ie,{onSelect:d})),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Background Color"),r.a.createElement(oe,{onSelect:u})),r.a.createElement("div",{className:ne.a.Option},r.a.createElement("p",null,"Text Color"),r.a.createElement(oe,{onSelect:m,download:!1})),r.a.createElement(ue.a,{disabled:v,onClick:t},"Save"))}function de(){var e=Object(a.useState)(Q),t=Object(i.a)(e,2),n=t[0],o=t[1],c=function(){var e=j().setLoading,t=B(),n=t.getPassword,a=t.setPassword,r=D();return function(){var t=Object(P.a)(T.a.mark((function t(o,c,l){var i;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat("https://us-central1-letters-2552113.cloudfunctions.net","/letters"),e(!0),t.next=4,A.request({method:"POST",url:i,data:o,validateStatus:function(e){return e>=200&&e<=401},headers:{Authorization:n(),styles:JSON.stringify(c),createdAt:l,"Content-Type":"text/plain"}});case 4:401===t.sent.status&&(a(""),r(),e(!1)),alert("Letter Saved !"),document.location.reload();case 8:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}(),s={backgroundColor:n.styles.backgroundColor,color:n.styles.color},u=Object(l.a)({},s,{textAlign:n.styles.textAlign,marginLeft:n.styles.marginLeft,marginRight:n.styles.marginRight,fontSize:n.styles.fontSize}),m=function(e){return o(Object(l.a)({},n,{text:e}))},g={styles:n.styles,text:n.text,date:n.createdAt,colors:n.colors,setStyle:function(e,t){o("margin"===e?Object(l.a)({},n,{styles:Object(l.a)({},n.styles,{marginLeft:t,marginRight:t})}):Object(l.a)({},n,{styles:Object(l.a)({},n.styles,Object(d.a)({},e,t))}))},setText:m,setDate:function(e){return o(Object(l.a)({},n,{createdAt:e}))},setColors:function(e){return o(Object(l.a)({},n,{colors:e}))}};return r.a.createElement(Z.Provider,{value:g},r.a.createElement("div",{className:K.a.Editor,style:s},r.a.createElement("textarea",{autoFocus:!0,className:K.a.TextView,style:u,value:n.text,onChange:function(e){return m(e.target.value)}}),r.a.createElement(me,{onSave:function(){return c(n.text,n.styles,n.createdAt.getTime())}})))}function ge(){var e=Object(a.useState)(N),t=Object(i.a)(e,2),n=t[0],o=t[1],c=B().getPassword,s=L();Object(a.useEffect)((function(){""===c()&&s("#/login")}),[]);var u=Object(l.a)({},n,{setLoading:function(e){return o(Object(l.a)({},n,{loading:e}))}});return(r.a.createElement(y.Provider,{value:u},n.loading?r.a.createElement(G,null):null,r.a.createElement(fe,null)))}function fe(){return r.a.createElement(U.a,null,r.a.createElement(X.a,{exact:!0,path:"/",component:V}),r.a.createElement(X.a,{path:"/letter",component:V}),r.a.createElement(X.a,{path:"/login",component:R}),r.a.createElement(X.a,{path:"/editor",component:de}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,n){e.exports={Colors:"Colors_Colors__RegEJ",ColorCell:"Colors_ColorCell__CUPMs",Color:"Colors_Color__jhoaO"}},41:function(e,t,n){e.exports={NavigatorContainer:"Navigator_NavigatorContainer__1A4Fa",Navigator:"Navigator_Navigator__kapp6",NavigationButton:"Navigator_NavigationButton__1ADLL",NavigationButtonDisabled:"Navigator_NavigationButtonDisabled__2y3BO"}},51:function(e,t,n){e.exports={TextView:"TextView_TextView__18I0G",DateText:"TextView_DateText__3Op1p",Text:"TextView_Text__3dibn"}},52:function(e,t,n){e.exports={TextAlignmentContainer:"TextAlignment_TextAlignmentContainer__32VVi",TextAlignmentItem:"TextAlignment_TextAlignmentItem__2ezi_",TextAlignmentItemSelected:"TextAlignment_TextAlignmentItemSelected__3hYiv"}},66:function(e,t,n){e.exports=n.p+"static/media/arrow.d12b386f.svg"},67:function(e,t,n){e.exports={Meter:"LoadingBar_Meter__3jHm6",Progress:"LoadingBar_Progress__28D0g",progressBar:"LoadingBar_progressBar__27V53"}},68:function(e,t,n){e.exports={Editor:"Editor_Editor__1Anab",TextView:"Editor_TextView__2Caav"}}},[[159,1,2]]]);
//# sourceMappingURL=main.bf5172d8.chunk.js.map